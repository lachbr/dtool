#!/usr/local/bin/perl

if ($#ARGV != -1) {
   exit print "Usage: ctihave\n" ;
}

$tool = $ENV{"DTOOL"} ;
if ( $tool eq "" ) {
   die "not configured for using CTtools\n" ;
}

require "$tool/inc/ctutils.pl" ;
require "$tool/inc/ctvspec.pl" ;
require "$tool/inc/ctquery.pl" ;
require "$tool/inc/ctproj.pl" ;
require "$tool/inc/ctcm.pl" ;

$projs = $ENV{"CTPROJS"} ;
@projsplit = split( / +/, $projs ) ;

foreach $item ( @projsplit ) {
    @items = split( /:/, $item ) ;
    $thisproj = $items[0] ;
    $thisflav = $items[1] ;
    $thisspec = &CTResolveSpec( $thisproj, $thisflav ) ;
    $result = $result . &CTCMIHave( $thisproj, $thisflav, $thisspec ) ;
}
if ( $result ne "" ) {
    @splitlist = split( /\n/, $result ) ;
    foreach $item ( @splitlist ) {
	print $item . "\n" ;
    }
}
